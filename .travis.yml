language: go
go: '1.4'
compiler: gcc
before_install:
- go get github.com/axw/gocov/gocov
- go get github.com/mattn/goveralls
- go get golang.org/x/tools/cmd/cover
- go get github.com/modocache/gover
script:
- go test -coverprofile=parse.coverprofile -v ./parse
- go test -coverprofile=main.coverprofile -v
after_success:
- gover
- goveralls -coverprofile=gover.coverprofile -service=travis-ci
before_deploy:
- go get github.com/mitchellh/gox
# - gox -osarch="darwin/amd64" -build-toolchain
# - gox -osarch="darwin/amd64" -cgo -verbose -output="dist/subicul-{{.OS}}-{{.Arch}}"
- gox -osarch="linux/386 linux/amd64 linux/arm windows/386 windows/amd64" -build-toolchain
- mkdir -p  dist
- gox -osarch="linux/386 linux/amd64 linux/arm windows/386 windows/amd64" -output="dist/subicul-{{.OS}}-{{.Arch}}"
- ls dist/*
deploy:
  provider: releases
  api_key:
    secure: KY67mDBMrY/FZJ9pGNqAR0tVA3O+ntkR6m8k1dv1MDkGLcoMwO8Tl3ZkZTvGb8GNPv4iUS8adNvqv5nIP719Z/9bdtnornveJF0Ygi7H6ojRpoiR48lOs7aWElVZrpA923v2JW82q8b2bL7b6g1ZT7FfWFfRg51rGXYLioU0TrySkaDqO78b3IwfAP5ODqWVRCzDzALQt6gSnAbf6s62aOAPZ0PmtfHz81nBXj2IKG+WS0YFa/oVyT1Np3bOSJgk8prVer2+8a8I9byGLaYjxxLfcNIAj2v1IVOZVn7VI3Gkq5/iZvoHpQ0dMavUw60Pm0xYopF9kscBMoqrafqyhYi7bON56FJi1hLJB4paBnrPqW8ZZt870qnoXccqwHn7NVLaFVxStjuk2VCdgf7d+hGkPw6jSbfiNxTbhAKsJoidO8VEI52LxJjGJdvKfZnpwi2SR3gBVVZX+wMQSuNogV9xG1yvc7B6UT0lz40pSCE2FgvrJoAW75TGkHuDXQBEN2deAMhkPcIj/TPssXClNmnNnp/3Cc7IBswMY6B1yp+l9t9kDYDCgBjj99MrEJXwDmNoCdHotdZTQQQoIkpa2xWif70EmgqHIInd+37Ux2sFjP+hXc60HWhWtcc4cpryE3wxppLVuLejcB/EIz1544/dbcWs7AjjOH3v0V+RXNM=
  file: dist/*
  file_glob: true
  skip_cleanup: true
  on:
    tags: true
notifications:
  slack:
    secure: Dtj0nWI/qtofy5NLW0XALWjxuEW4nV+IAv9PE+Yv7kZP0e2qKOqa2EurSSnYsnHWjjYIcZDr/EYZrcU/BwNRXj+KCnZ1BetvaZQFYnnFRkdu3Ys4QjzmYsJGkf4XHQKEEU7x5zvqiWeWctu2VcDt3JlGAKGPxLe+NVphbNhD/M4yJuLU6pR0JVUwCTrhkZHiHq501KzlzqSsQE3Qq9BqMV0+uT6YtFmYxfAp1n7x+NMZcw2xcig7ipw3O5MKfoRKrs02UHRo2WXuZI8UCvsCjAB6VuRKP/jpjx3KP65iqCRgGyZrOdGOPIsRsbKgWJnLytVXRNbXOO/tbQ63DzvSaduQbR71I5RQA84AZOb4QWv5obk8H4A2U+OF7CkX/K9yJFdQ23ef2oldACUFHGdvizD4HdWGxMnwCOZ9VjJtkTpiZlNAhkJYJD12QmbV0AMy3wK8mgDETMyXWQwz3GlTR+/aURUmn4o77ne5nCAnIcp/H1/MJHH5VmDa1A/aBE4HSkU9TOwRH4fLm34yDcColiRI5YYpG8eyZAXlohXF2ryC6yRMJArNTa3zdADMSqJV9aCrBgWO1W5v8s8tE1fveATqS6WzwZmZ4fZdKZ0Va9bTJWVPXTPT82FpClUwOVHoGyfW4fZTcdzhH1+C/7E4/N5z6LfXgolfAN30v5xd0kc=
  email: false
